(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{1093:function(t,e,r){Promise.resolve().then(r.bind(r,2962)),Promise.resolve().then(r.t.bind(r,3385,23))},2962:function(t,e,r){"use strict";let a;r.r(e),r.d(e,{CartProvider:function(){return d},useCart:function(){return l}});var n=r(7437),i=r(2265);let o=(0,i.createContext)(),u=(t,e)=>{switch(e.type){case"ADD_TO_CART":case"UPDATE_CART":return e.payload;case"REMOVE_FROM_CART":return t.filter(t=>t.id!==e.payload);case"UPDATE_QUANTITY":return t.map(t=>t.id===e.payload.id?{...t,quantity:e.payload.quantity}:t);case"CLEAR_CART":return[];default:return t}},d=t=>{let{children:e}=t,[r,d]=(0,i.useReducer)(u,[],t=>{try{return(a=localStorage.getItem("cart"))?JSON.parse(a):t}catch(e){return console.error("Error parsing cart from localStorage:",e),t}}),[l,c]=(0,i.useState)(()=>{if("undefined"!=typeof localStorage){let t=localStorage.getItem("quantities");return t?JSON.parse(t):{}}}),[s,f]=(0,i.useState)(0),[p,y]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{"undefined"!=typeof localStorage&&localStorage.setItem("cart",JSON.stringify(r))},[r]),(0,i.useEffect)(()=>{"undefined"!=typeof localStorage&&localStorage.setItem("quantities",JSON.stringify(l))},[l]),(0,i.useEffect)(()=>{f(r.reduce((t,e)=>{let r=l[e.id]||e.quantity||1;return t+e.price*r},0))},[l,r]),(0,n.jsx)(o.Provider,{value:{cart:r,addToCart:(t,e,a)=>{-1!==r.findIndex(e=>String(e.id)===String(t.id))?(c(e=>({...e,[t.id]:a||1})),d({type:"UPDATE_CART",payload:r.map(r=>String(r.id)===String(t.id)?{...r,quantity:a||1,additionalInfo:e||r.additionalInfo}:r)})):(d({type:"ADD_TO_CART",payload:[...r,{...t,quantity:a||1,additionalInfo:e||{}}]}),c(e=>({...e,[t.id]:a||1})))},removeFromCart:t=>{d({type:"REMOVE_FROM_CART",payload:t}),c(e=>{let{[t]:r,...a}=e;return a})},updateQuantity:(t,e)=>{d({type:"UPDATE_QUANTITY",payload:{id:t,quantity:e}}),c(r=>({...r,[t]:e}))},clearCart:()=>{d({type:"CLEAR_CART"}),c({})},quantities:l,subtotal:s,isModalOpen:p,toggleModal:()=>{y(!p)}},children:e})},l=()=>{let t=(0,i.useContext)(o);if(!t)throw Error("useCart must be used within a CartProvider");return t}},3385:function(){}},function(t){t.O(0,[971,69,744],function(){return t(t.s=1093)}),_N_E=t.O()}]);